

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.1. Defining data types</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../_static/m269.css?v=4f7d186f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.2. Static arrays" href="06_2_static_array.html" />
    <link rel="prev" title="6. Implementing sequences" href="06-introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            M269
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/01-introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_Sequence/02-introduction.html">2. Numbers and sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Selection/03-introduction.html">3. Booleans and selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Iteration/04-introduction.html">4. Sequences and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_TMA01-1/05-introduction.html">5. TMA 01 part 1</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="06-introduction.html">6. Implementing sequences</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.1. Defining data types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Data-structure">6.1.1. Data structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Functions">6.1.2. Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Classes">6.1.3. Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Mistakes">6.1.4. Mistakes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="06_2_static_array.html">6.2. Static arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_3_develop_type.html">6.3. Developing data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_4_bounded.html">6.4. Bounded sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_5_dynamic_array.html">6.5. Dynamic arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_6_use_dyn_array.html">6.6. Using dynamic arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_7_linked_list.html">6.7. Linked lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_8_summary.html">6.8. Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../07_Ordered/07-introduction.html">7. Stacks and queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Unordered/08-introduction.html">8. Unordered collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Practice-1/09-introduction.html">9. Practice 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_TMA01-2/10-introduction.html">10. TMA 01 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_Search/11-introduction.html">11. Exhaustive search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12_Recursion/12-introduction.html">12. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13_Divide/13-introduction.html">13. Divide and conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14_Sorting/14-introduction.html">14. Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15_TMA02-1/15-introduction.html">15. TMA 02 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16_Trees/16-introduction.html">16. Rooted trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17_Graphs_1/17-introduction.html">17. Graphs 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18_Greed/18-introduction.html">18. Greed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../19_Practice-2/19-introduction.html">19. Practice 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../20_TMA02-2/20-introduction.html">20. TMA 02 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21_Graphs_2/21-introduction.html">21. Graphs 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../22_Backtracking/22-introduction.html">22. Backtracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../23_Dynamic_Programming/23-introduction.html">23. Dynamic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../24_Practice-3/24-introduction.html">24. Practice 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../25_TMA03-1/25-introduction.html">25. TMA 03 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../26_Complexity_classes/26-introduction.html">26. Complexity classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../27_Computability/27-introduction.html">27. Computability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../28_TMA03-2/28-introduction.html">28. TMA 03 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31_Hints/31-introduction.html">29. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../32_Answers/32-introduction.html">30. Answers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../33_Figures/33-introduction.html">31. Figures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">M269</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="06-introduction.html"><span class="section-number">6. </span>Implementing sequences</a></li>
      <li class="breadcrumb-item active"><span class="section-number">6.1. </span>Defining data types</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Defining-data-types">
<h1><span class="section-number">6.1. </span>Defining data types<a class="headerlink" href="#Defining-data-types" title="Link to this heading"></a></h1>
<p>Before looking at how to implement the sequence ADT, let’s start with a simpler example that illustrates the difference between a data structure and a data type, and how to define a data type in Python.</p>
<p>Let’s suppose we want to define and implement an ADT for fractions <span class="math notranslate nohighlight">\(\frac{x}{y}\)</span>, where <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> are integers, with <span class="math notranslate nohighlight">\(x\)</span> being the numerator and <span class="math notranslate nohighlight">\(y ≠ 0\)</span> being the denominator.</p>
<div class="admonition note">
<p><strong>Info:</strong> MU123 Unit 3 Section 2 introduces fractions and their operations.</p>
</div>
<p>Programming languages have special syntax for literals of built-in data types, like integers and strings and other sequence types. However, for our own types we need to define constructor operations that create values of the new type from values of other types, e.g. like Python’s constructor to create strings from integers. To highlight such operations, we shall use ‘Constructor’ instead of ‘Function’ in the template. Here’s how two of the fraction ADT’s operations could be defined.</p>
<p><strong>ADT</strong>: fraction</p>
<div class="line-block">
<div class="line"><strong>Constructor</strong>: new fraction</div>
<div class="line"><strong>Inputs</strong>: <em>numerator</em>, an integer; <em>denominator</em>, an integer</div>
<div class="line"><strong>Preconditions</strong>: <em>denominator</em> ≠ 0</div>
<div class="line"><strong>Output</strong>: <em>ratio</em>, a fraction</div>
<div class="line"><strong>Postconditions</strong>: <em>ratio</em> = <span class="math notranslate nohighlight">\(\frac{numerator}{denominator}\)</span></div>
</div>
<div class="line-block">
<div class="line"><strong>Function</strong>: multiplication</div>
<div class="line"><strong>Inputs</strong>: <em>left</em>, a fraction; <em>right</em>, a fraction</div>
<div class="line"><strong>Preconditions</strong>: true</div>
<div class="line"><strong>Output</strong>: <em>product</em>, a fraction</div>
<div class="line"><strong>Postconditions</strong>: if <em>left</em> = <span class="math notranslate nohighlight">\(\frac{ln}{ld}\)</span> and <em>right</em> = <span class="math notranslate nohighlight">\(\frac{rn}{rd}\)</span>, then <em>product</em> = <span class="math notranslate nohighlight">\(\frac{ln \times rn}{ld \times rd}\)</span></div>
</div>
<p>Let’s see how to implement the fraction ADT in Python.</p>
<section id="Data-structure">
<h2><span class="section-number">6.1.1. </span>Data structure<a class="headerlink" href="#Data-structure" title="Link to this heading"></a></h2>
<p>The first step in implementing an ADT is to choose how to structure the data. A fraction is represented by two integers, so the obvious choice is to use a tuple or list with a pair of integers. A tuple is a better choice, to prevent changes to the numerator or denominator. Furthermore, we must state what each integer represents. It’s probably more intuitive for the first integer of the tuple to be the numerator and the second to be the denominator.</p>
<p>Data structures vary widely and we can’t fit their description into a template, like we do for operations. During your professional life you may need to explain what data structures you use, verbally to a colleague, or in writing documentation, and so it’s important you communicate the structure of data in plain but clear English, or whatever language you may use at work. For this example, a good description would be:</p>
<blockquote>
<div><p>The data structure to represent a fraction is a tuple of two integers, the first being the numerator and the second the non-zero denominator.</p>
</div></blockquote>
</section>
<section id="Functions">
<h2><span class="section-number">6.1.2. </span>Functions<a class="headerlink" href="#Functions" title="Link to this heading"></a></h2>
<p>Having decided the data structure, we can implement the operations. Until now we implemented each operation with a Python function, like the following. (I omit docstrings to keep this temporary solution short.)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>  <span class="c1"># noqa: D103</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">multiplication</span><span class="p">(</span><span class="n">left</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>  <span class="c1"># noqa: D103</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">left</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>We use the constructor operation to create new values, which are used by the other operations.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">half</span> <span class="o">=</span> <span class="n">fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">multiplication</span><span class="p">(</span><span class="n">half</span><span class="p">,</span> <span class="n">half</span><span class="p">)</span>  <span class="c1"># one half times one half is a quarter</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1, 4)
</pre></div></div>
</div>
<p>This way of implementing ADTs is unsatisfactory because it exposes the data structure to the user. This allows the user to bypass the constructor and make (by mistake) calls like</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">multiplication</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1, 6)
</pre></div></div>
</div>
<p>where the second argument doesn’t represent a fraction. Moreover, if we change the data structure then the user will likely have to change their code. We need a better approach.</p>
</section>
<section id="Classes">
<h2><span class="section-number">6.1.3. </span>Classes<a class="headerlink" href="#Classes" title="Link to this heading"></a></h2>
<p>A data type is a collection of values and operations on those values. Python and other languages have a construct to bundle together data and functionality: <strong>classes</strong>. Each class implements a data type: the values are the <strong>instances</strong> of the class and the operations are the class’s <strong>methods</strong>. An <strong>object</strong> is an instance of some class, and that’s why I used the word ‘object’ in templates to denote any value. For example, <code class="docutils literal notranslate"><span class="pre">5</span></code> and <code class="docutils literal notranslate"><span class="pre">[]</span></code> are objects: <code class="docutils literal notranslate"><span class="pre">5</span></code> is an instance of class <code class="docutils literal notranslate"><span class="pre">int</span></code>
and <code class="docutils literal notranslate"><span class="pre">[]</span></code> is an instance of class <code class="docutils literal notranslate"><span class="pre">list</span></code>, which has methods like <code class="docutils literal notranslate"><span class="pre">pop</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code>. Methods are usually directly called using the dot notation, but some are indirectly called via operators, like <code class="docutils literal notranslate"><span class="pre">+</span></code> for addition or concatenation.</p>
<div class="admonition note">
<p><strong>Info:</strong> Object-oriented programming is an approach that models a software system as a collection of objects calling each other’s methods. M250 explains this approach at length.</p>
</div>
<p>Every instance has some variables, called <strong>instance variables</strong>, to hold the data for that instance. When defining a class we define the variables for all instances of that class. Different instances typically have different values for their variables. Let me show you how to define a class in Python. I explain the code afterwards.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Fraction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A ratio represented as a pair of integers: numerator and non-zero denominator.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialise the fraction.</span>

<span class="sd">        Preconditions: denominator != 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">multiplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the product of self and right.</span>

<span class="sd">        Postconditions: if self is the fraction sn/sd and</span>
<span class="sd">        right is the fraction rn/rd, then the output is fraction</span>
<span class="sd">        (sn*rn) / (sd*rd)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numerator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">denominator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The definition of a class <code class="docutils literal notranslate"><span class="pre">C</span></code> starts with <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">C:</span></code> and a docstring describing the data type being defined, followed by the methods, which are defined like any Python function. All methods are indented: they are ‘within’ the class. The name of a class reflects what each instance represents, so it’s usually in the singular. The names of built-in classes are usually in lowercase, but the names of classes we define should use capitalised words without underscores to separate them, e.g.
<code class="docutils literal notranslate"><span class="pre">FractionalNumber</span></code>.</p>
<p>In M269, each class must have a method named <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, with two underscores at the start and at the end. This method takes as first argument an instance of the class, conventionally called <code class="docutils literal notranslate"><span class="pre">self</span></code>, and possibly additional arguments with data to initialise that instance: here, the numerator and denominator of the fraction. The body of the method creates the instance variables, using dot notation to indicate that these variables ‘belong’ to the instance. For every instance variable <code class="docutils literal notranslate"><span class="pre">x</span></code>
there’s an assignment to <code class="docutils literal notranslate"><span class="pre">self.x</span></code>. In this example, I create an instance variable <code class="docutils literal notranslate"><span class="pre">value</span></code> that holds the tuple with the two integers passed to the method.</p>
<p>Each built-in class, like <code class="docutils literal notranslate"><span class="pre">range</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span></code>, has a constructor: a function with the same name as the class to create instances of that class. The Python interpreter automatically defines a constructor for every class we define, with the same arguments as method <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, except for <code class="docutils literal notranslate"><span class="pre">self</span></code>. For this example, the interpreter creates a constructor <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> with two arguments, which we use to create new fractions.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">one_half</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>When we call the constructor, the interpreter creates an ‘empty’ instance, without any data, and passes it as the first argument to <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, which creates the instance variables and assigns values to them. The constructor (not the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method!) then returns the instance: that’s why there are no return statements in the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">help</span></code> function to obtain information about any class. Some of the information is of no relevance to M269.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">Fraction</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on class Fraction in module __main__:

class Fraction(builtins.object)
 |  Fraction(numerator: int, denominator: int) -&gt; None
 |
 |  A ratio represented as a pair of integers: numerator and non-zero denominator.
 |
 |  Methods defined here:
 |
 |  __init__(self, numerator: int, denominator: int) -&gt; None
 |      Initialise the fraction.
 |
 |      Preconditions: denominator != 0
 |
 |  multiplication(self, right: &#39;Fraction&#39;) -&gt; &#39;Fraction&#39;
 |      Return the product of self and right.
 |
 |      Postconditions: if self is the fraction sn/sd and
 |      right is the fraction rn/rd, then the output is fraction
 |      (sn*rn) / (sd*rd)
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables
 |
 |  __weakref__
 |      list of weak references to the object

</pre></div></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">help</span></code> function copies the header of the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method for the constructor. This gives the erroneous impression that the constructor doesn’t return anything.</p>
<p>Methods are called with dot notation. The interpreter looks up the class of the object to the left of the dot and calls the method defined in that class. The first argument of every method is therefore an instance of the class being defined. We conventionally call it <code class="docutils literal notranslate"><span class="pre">self</span></code> and don’t indicate explicitly its type, which is <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> in this example. Here’s an example of calling a method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">one_half</span><span class="o">.</span><span class="n">multiplication</span><span class="p">(</span><span class="n">one_half</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;__main__.Fraction at 0x1085480b0&gt;
</pre></div></div>
</div>
<p>Unfortunately, the output message is not very useful. The interpreter shows the class and unique id of the resulting object. The id is an integer, shown here in hexadecimal notation. Printing the fraction doesn’t help either.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">one_half</span><span class="o">.</span><span class="n">multiplication</span><span class="p">(</span><span class="n">one_half</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;__main__.Fraction object at 0x108548470&gt;
</pre></div></div>
</div>
<p>If we want to see the value of an instance in a meaningful way, we have to implement a method <code class="docutils literal notranslate"><span class="pre">__str__</span></code> (again, two underscores before and after) that returns a string. The <code class="docutils literal notranslate"><span class="pre">print</span></code> function calls the <code class="docutils literal notranslate"><span class="pre">str</span></code> constructor on each object it prints, which in turn calls the <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method on that object.</p>
<p>Here’s the class again, with the additional method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Fraction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A ratio represented as a pair of integers: numerator and non-zero denominator.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialise the fraction.</span>

<span class="sd">        Preconditions: denominator != 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">multiplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the product of self and right.</span>

<span class="sd">        Postconditions: if self is the fraction sn/sd and</span>
<span class="sd">        right is the fraction rn/rd, then the output is fraction</span>
<span class="sd">        (sn*rn) / (sd * rd)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numerator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">denominator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the fraction.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot; / &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Now we can see the value of a fraction:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ONE_HALF</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ONE_QUARTER</span> <span class="o">=</span> <span class="n">ONE_HALF</span><span class="o">.</span><span class="n">multiplication</span><span class="p">(</span><span class="n">ONE_HALF</span><span class="p">)</span>
<span class="n">ONE_QUARTER</span>  <span class="c1"># display class and unique id</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;__main__.Fraction at 0x10850d4c0&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ONE_QUARTER</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">ONE_QUARTER</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 / 4
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;1 / 4&#39;
</pre></div></div>
</div>
</section>
<section id="Mistakes">
<h2><span class="section-number">6.1.4. </span>Mistakes<a class="headerlink" href="#Mistakes" title="Link to this heading"></a></h2>
<p>Whenever you change a class you must rerun code cells that create instances: otherwise they remain instances of the old version of the class. Consider this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">half</span><span class="p">)</span>  <span class="c1"># created with fraction(1, 2); instance of tuple</span>
<span class="nb">print</span><span class="p">(</span><span class="n">one_half</span><span class="p">)</span>  <span class="c1"># created with first version of Fraction class</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ONE_HALF</span><span class="p">)</span>  <span class="c1"># created with second version of Fraction class</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1, 2)
&lt;__main__.Fraction object at 0x10850ffb0&gt;
1 / 2
</pre></div></div>
</div>
<p>Unless you have rerun cells in a different order, the middle output of the cell above isn’t ‘1 / 2’, because <code class="docutils literal notranslate"><span class="pre">one_half</span></code> was created with the constructor for the class without the <code class="docutils literal notranslate"><span class="pre">__str__</span></code> method.</p>
<p>The name of a class becomes known only <em>after</em> processing the class definition. If we need to use the class name in the header of a method, then we must write it as a string, as I’ve done for the <code class="docutils literal notranslate"><span class="pre">multiplication</span></code> method. If you forget the string quotes you get a name error.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Date</span><span class="p">:</span>  <span class="c1"># noqa: D101</span>
    <span class="c1"># docstrings and __init__ omitted to focus on the issue at hand</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">difference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return number of days between two dates.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>  <span class="c1"># dummy code</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[13], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg ansi-bold" style="color: rgb(0,135,0)">class</span><span class="ansi-yellow-bg" style="color: rgb(188,188,188)"> </span><span class="ansi-yellow-bg ansi-bold" style="color: rgb(0,0,255)">Date</span><span class="ansi-yellow-bg">:</span><span class="ansi-yellow-bg">  </span><span class="ansi-yellow-bg" style="color: rgb(95,135,135)"># noqa: D101</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg" style="color: rgb(95,135,135)"># docstrings and __init__ omitted to focus on the issue at hand</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg ansi-bold" style="color: rgb(0,135,0)">def</span><span class="ansi-yellow-bg" style="color: rgb(188,188,188)"> </span><span class="ansi-yellow-bg" style="color: rgb(0,0,255)">difference</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">self</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">other</span><span class="ansi-yellow-bg">:</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">Date</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">-</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">&gt;</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(0,135,0)">int</span><span class="ansi-yellow-bg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span class="ansi-yellow-bg" style="color: rgb(188,188,188)">        </span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;&#34;&#34;Return number of days between two dates.&#34;&#34;&#34;</span>

Cell <span class="ansi-green-fg">In[13], line 4</span>, in <span class="ansi-cyan-fg">Date</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">class</span><span style="color: rgb(188,188,188)"> </span><span class="ansi-bold" style="color: rgb(0,0,255)">Date</span>:  <span style="color: rgb(95,135,135)"># noqa: D101</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>     <span style="color: rgb(95,135,135)"># docstrings and __init__ omitted to focus on the issue at hand</span>
<span class="ansi-green-fg">----&gt; 4</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span style="color: rgb(0,0,255)">difference</span>(<span style="color: rgb(0,135,0)">self</span>, other: <span class="ansi-yellow-bg">Date</span>) <span style="color: rgb(98,98,98)">-</span><span style="color: rgb(98,98,98)">&gt;</span> <span style="color: rgb(0,135,0)">int</span>:
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span style="color: rgb(188,188,188)">        </span><span style="color: rgb(175,0,0)">&#34;&#34;&#34;Return number of days between two dates.&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span>         <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> <span style="color: rgb(98,98,98)">0</span>

<span class="ansi-red-fg">NameError</span>: name &#39;Date&#39; is not defined
</pre></div></div>
</div>
<p>As explained in <a class="reference internal" href="../04_Iteration/04_6_lists.html#Modifying-lists"><span class="std std-ref">Section 4.6.4</span></a>, method names are only known in the context of their class. Calling a method as if it were a standalone function usually raises a name error.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="fm">__str__</span><span class="p">(</span><span class="n">ONE_QUARTER</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[14], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg" style="color: rgb(0,0,255)">__str__</span>(ONE_QUARTER)

<span class="ansi-red-fg">NameError</span>: name &#39;__str__&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ONE_QUARTER</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;1 / 4&#39;
</pre></div></div>
</div>
<p>However, if a standalone function of the same name exists, the interpreter will call that one.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">multiplication</span><span class="p">(</span><span class="n">ONE_HALF</span><span class="p">,</span> <span class="n">ONE_HALF</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[16], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">multiplication</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">ONE_HALF</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">ONE_HALF</span><span class="ansi-yellow-bg">)</span>

Cell <span class="ansi-green-fg">In[1], line 6</span>, in <span class="ansi-cyan-fg">multiplication</span><span class="ansi-blue-fg">(left, right)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span style="color: rgb(0,0,255)">multiplication</span>(left: <span style="color: rgb(0,135,0)">tuple</span>, right: <span style="color: rgb(0,135,0)">tuple</span>) <span style="color: rgb(98,98,98)">-</span><span style="color: rgb(98,98,98)">&gt;</span> <span style="color: rgb(0,135,0)">tuple</span>:  <span style="color: rgb(95,135,135)"># noqa: D103</span>
<span class="ansi-green-fg">----&gt; 6</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> (<span class="ansi-yellow-bg">left</span><span class="ansi-yellow-bg">[</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">0</span><span class="ansi-yellow-bg">]</span> <span style="color: rgb(98,98,98)">*</span> right[<span style="color: rgb(98,98,98)">0</span>], left[<span style="color: rgb(98,98,98)">1</span>] <span style="color: rgb(98,98,98)">*</span> right[<span style="color: rgb(98,98,98)">1</span>])

<span class="ansi-red-fg">TypeError</span>: &#39;Fraction&#39; object is not subscriptable
</pre></div></div>
</div>
<p>We get a type error because the indexing operation is not defined on fractions. The standalone function expects two tuples, not two fractions. <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> and <code class="docutils literal notranslate"><span class="pre">tuple</span></code> are different types, even though <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> has an instance variable of type <code class="docutils literal notranslate"><span class="pre">tuple</span></code>.</p>
<p>Likewise, I cannot pass a tuple to a method expecting a fraction.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">one_half</span><span class="o">.</span><span class="n">multiplication</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[17], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">one_half</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">multiplication</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">1</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">2</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg">)</span>

Cell <span class="ansi-green-fg">In[4], line 18</span>, in <span class="ansi-cyan-fg">Fraction.multiplication</span><span class="ansi-blue-fg">(self, right)</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span><span style="color: rgb(188,188,188)"> </span><span style="color: rgb(0,0,255)">multiplication</span>(<span style="color: rgb(0,135,0)">self</span>, right: <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Fraction</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(98,98,98)">-</span><span style="color: rgb(98,98,98)">&gt;</span> <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">Fraction</span><span style="color: rgb(175,0,0)">&#34;</span>:
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span style="color: rgb(188,188,188)">    </span><span style="color: rgb(175,0,0)">&#34;&#34;&#34;Return the product of self and right.</span>
<span class="ansi-green-intense-fg ansi-bold">     13</span>
<span class="ansi-green-intense-fg ansi-bold">     14</span> <span style="color: rgb(175,0,0)">    Postconditions: if self is the fraction sn/sd and</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> <span style="color: rgb(175,0,0)">    right is the fraction rn/rd, then the output is fraction</span>
<span class="ansi-green-intense-fg ansi-bold">     16</span> <span style="color: rgb(175,0,0)">    (sn*rn) / (sd*rd)</span>
<span class="ansi-green-intense-fg ansi-bold">     17</span> <span style="color: rgb(175,0,0)">    &#34;&#34;&#34;</span>
<span class="ansi-green-fg">---&gt; 18</span>     numerator <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>value[<span style="color: rgb(98,98,98)">0</span>] <span style="color: rgb(98,98,98)">*</span> <span class="ansi-yellow-bg">right</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">value</span>[<span style="color: rgb(98,98,98)">0</span>]
<span class="ansi-green-intense-fg ansi-bold">     19</span>     denominator <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>value[<span style="color: rgb(98,98,98)">1</span>] <span style="color: rgb(98,98,98)">*</span> right<span style="color: rgb(98,98,98)">.</span>value[<span style="color: rgb(98,98,98)">1</span>]
<span class="ansi-green-intense-fg ansi-bold">     20</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span> Fraction(numerator, denominator)

<span class="ansi-red-fg">AttributeError</span>: &#39;tuple&#39; object has no attribute &#39;value&#39;
</pre></div></div>
</div>
<p>I get a special case of a name error: the interpreter is complaining that tuples don’t have an instance variable named <code class="docutils literal notranslate"><span class="pre">value</span></code>. In Python, the instance variables and methods are a class’s <strong>attributes</strong>. If you have two attributes with the same name, e.g. an instance variable and a method, you will get errors. In the following incomplete example of a class for dates (day, month, year), the name <code class="docutils literal notranslate"><span class="pre">day</span></code> refers both to an integer instance variable and a method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Date</span><span class="p">:</span>  <span class="c1"># noqa: D101</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: D107</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">day</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">day</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># noqa: D102</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">day</span>
</pre></div>
</div>
</div>
<p>We can access the instance variable…</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Date</span><span class="p">()</span><span class="o">.</span><span class="n">day</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
</pre></div></div>
</div>
<p>…but not call the method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Date</span><span class="p">()</span><span class="o">.</span><span class="n">day</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[20], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">Date</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">day</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-red-fg">TypeError</span>: &#39;int&#39; object is not callable
</pre></div></div>
</div>
<p>As the above example shows, Python doesn’t prevent users of a class from accessing its instance variables. Here’s another example.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">ONE_HALF</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">ONE_HALF</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ONE_HALF</span><span class="p">,</span> <span class="s2">&quot;is positive and smaller than 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 / 2 is positive and smaller than 1
</pre></div></div>
</div>
<p>This code relies on a particular instance variable name and data structure for representing fractions. If either changes, the code won’t work. For example, imagine we replace the tuple with two integer instance variables:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Fraction</span><span class="p">:</span>  <span class="c1"># noqa: D101</span>
    <span class="c1"># docstrings omitted to focus on data structure changes</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: D107</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">=</span> <span class="n">numerator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">denominator</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">multiplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">:</span>  <span class="c1"># noqa: D102</span>
        <span class="n">numerator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">numerator</span>
        <span class="n">denominator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">denominator</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numerator</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; / &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">denominator</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">multiplication</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 / 6
</pre></div></div>
</div>
<p>Any code that uses the previous version of the class without accessing the instance variables also works with this version, because the <strong>interface</strong> of the class, i.e. its methods and their headers, hasn’t changed.</p>
<div class="admonition warning">
<p><strong>Note:</strong> Only the class’s methods should access the instance variables.</p>
</div>
<div class="admonition note">
<p><strong>Info:</strong> Unlike Java, Python doesn’t have access modifiers to make instance variables private or protected.</p>
</div>
<p>Accessing instance variables from outside a class is poor programming practice. If you need access to instance variables to solve a problem, you may not have defined enough methods. For example, the <code class="docutils literal notranslate"><span class="pre">Fraction</span></code> class should provide methods to return the numerator and denominator of a fraction. I’m adding only one of them, to illustrate how methods can call each other. Compare the following version to the previous one.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Fraction</span><span class="p">:</span>  <span class="c1"># noqa: D101</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numerator</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: D107</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">numerator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">denominator</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">numerator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># noqa: D102</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">multiplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Fraction&quot;</span><span class="p">:</span>  <span class="c1"># noqa: D102</span>
        <span class="n">numerator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span><span class="p">()</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">numerator</span><span class="p">()</span>
        <span class="n">denominator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">*</span> <span class="n">right</span><span class="o">.</span><span class="n">denominator</span>
        <span class="k">return</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  <span class="c1"># noqa: D105</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numerator</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot; / &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">denominator</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">multiplication</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1 / 6
</pre></div></div>
</div>
<p>I renamed one instance variable, so that it doesn’t have the same name as the new method. Note that <code class="docutils literal notranslate"><span class="pre">x.y()</span></code> calls method <code class="docutils literal notranslate"><span class="pre">y</span></code> on instance <code class="docutils literal notranslate"><span class="pre">x</span></code>, whereas <code class="docutils literal notranslate"><span class="pre">x.y</span></code> accesses variable <code class="docutils literal notranslate"><span class="pre">y</span></code> of instance <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>Assume that a second method to obtain the denominator is added. Can you think of an advantage for the multiplication, string conversion and other methods to be added to call the auxiliary methods instead of directly accessing the instance variables?</p>
<hr class="docutils" />
<p>If the data structure further changes, only the <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, <code class="docutils literal notranslate"><span class="pre">numerator</span></code> and <code class="docutils literal notranslate"><span class="pre">denominator</span></code> methods must change; all other methods on fractions (multiplication, addition, string conversion, rounding, etc.) remain the same.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="06-introduction.html" class="btn btn-neutral float-left" title="6. Implementing sequences" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="06_2_static_array.html" class="btn btn-neutral float-right" title="6.2. Static arrays" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2025 The Open University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>