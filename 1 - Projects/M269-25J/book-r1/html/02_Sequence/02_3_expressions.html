

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.3. Expressions</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../_static/m269.css?v=4f7d186f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.4. Assignments" href="02_4_assignments.html" />
    <link rel="prev" title="2.2. Arithmetic operations" href="02_2_operations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            M269
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/01-introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="02-introduction.html">2. Numbers and sequence</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="02_1_numbers.html">2.1. Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_2_operations.html">2.2. Arithmetic operations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.3. Expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Mistakes">2.3.1. Mistakes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-2.3.1">Exercise 2.3.1</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="02_4_assignments.html">2.4. Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_5_maths_functions.html">2.5. Functions in mathematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_6_py_functions.html">2.6. Functions in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_7_complexity.html">2.7. Complexity</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_8_time.html">2.8. Run-times</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_9_summary.html">2.9. Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_Selection/03-introduction.html">3. Booleans and selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Iteration/04-introduction.html">4. Sequences and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_TMA01-1/05-introduction.html">5. TMA 01 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Implementing/06-introduction.html">6. Implementing sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07_Ordered/07-introduction.html">7. Stacks and queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Unordered/08-introduction.html">8. Unordered collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Practice-1/09-introduction.html">9. Practice 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_TMA01-2/10-introduction.html">10. TMA 01 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_Search/11-introduction.html">11. Exhaustive search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12_Recursion/12-introduction.html">12. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13_Divide/13-introduction.html">13. Divide and conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14_Sorting/14-introduction.html">14. Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15_TMA02-1/15-introduction.html">15. TMA 02 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16_Trees/16-introduction.html">16. Rooted trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17_Graphs_1/17-introduction.html">17. Graphs 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18_Greed/18-introduction.html">18. Greed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../19_Practice-2/19-introduction.html">19. Practice 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../20_TMA02-2/20-introduction.html">20. TMA 02 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21_Graphs_2/21-introduction.html">21. Graphs 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../22_Backtracking/22-introduction.html">22. Backtracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../23_Dynamic_Programming/23-introduction.html">23. Dynamic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../24_Practice-3/24-introduction.html">24. Practice 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../25_TMA03-1/25-introduction.html">25. TMA 03 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../26_Complexity_classes/26-introduction.html">26. Complexity classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../27_Computability/27-introduction.html">27. Computability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../28_TMA03-2/28-introduction.html">28. TMA 03 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31_Hints/31-introduction.html">29. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../32_Answers/32-introduction.html">30. Answers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../33_Figures/33-introduction.html">31. Figures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">M269</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="02-introduction.html"><span class="section-number">2. </span>Numbers and sequence</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.3. </span>Expressions</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Expressions">
<h1><span class="section-number">2.3. </span>Expressions<a class="headerlink" href="#Expressions" title="Link to this heading"></a></h1>
<p>An <strong>expression</strong> is a single value, like 3 or 2.4, a single variable, like <em>x</em>, or an operator applied to subexpressions. We can only apply an operator if we know the values of its operands. So, to compute the value of an expression we must first evaluate its subexpressions to obtain their values. We also need to know the value of each variable that occurs in the expression. The following examples assume the variables have already been replaced with their values.</p>
<p>Subexpressions that are not single values or variables are enclosed in parentheses. For example, the expression (3 + 4) × 5 consists of a multiplication applied to subexpression 3 + 4 (the left operand) and subexpression 5 (the right operand), which is a single value. In turn, subexpression 3 + 4 is the addition of two values. The value of the expression is (3 + 4) × 5 = 7 × 5 = 35. By contrast, the value of 3 + (4 × 5) is 23. Both expressions have the same operators, but the subexpressions
differ. Hence the order of the operations also differs and so do the results.</p>
<p>Writing parentheses around each subexpression gets tedious for long expressions, so mathematicians invented conventions to reduce the need for parentheses. The conventions are based on two concepts: <strong>precedence</strong> and <strong>associativity</strong>.</p>
<p>The precedence of an operation indicates its order of evaluation in relation to other operations. For example, if multiplication has higher precedence than addition, then 3 + 4 × 5 = 3 + (4 × 5), but if addition has the higher precedence of the two, then 3 + 4 × 5 = (3 + 4) × 5.</p>
<p>Operations with the same precedence are <strong>left-associative</strong>, i.e. executed from left to right, or <strong>right-associative</strong>, i.e. executed right to left. For example, if multiplication and addition have the same precedence and are left-associative, then 3 + 4 × 5 = (3 + 4) × 5, but if they’re right-associative, then 3 + 4 × 5 = 3 + (4 × 5).</p>
<p>The precedence and associativity of operations changed throughout the history of mathematics, and it varies among authors, programming languages, spreadsheet apps and calculators. It’s a jungle out there… M269 follows Python’s precedence and associativity rules, so that mathematical expressions can be translated directly to Python. The next table lists the operations from highest to lowest precedence, and indicates the associativity for operations at the same precedence level.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Associativity</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>brackets</p></td>
<td><p>left</p></td>
</tr>
<tr class="row-odd"><td><p>exponentiation</p></td>
<td><p>right</p></td>
</tr>
<tr class="row-even"><td><p>negation</p></td>
<td><p>right</p></td>
</tr>
<tr class="row-odd"><td><p>multiplication, division, floor division, modulo</p></td>
<td><p>left</p></td>
</tr>
<tr class="row-even"><td><p>addition, subtraction</p></td>
<td><p>left</p></td>
</tr>
</tbody>
</table>
<p>If we consider brackets as operators, then bracketed expressions have the highest precedence and are evaluated ‘inside out’ (most nested first), because subexpressions must be evaluated before the operator is applied. Bracketed expressions at the same nesting level are evaluated left to right. The floor operator and any operation written in functional notation are also bracketed expressions.</p>
<p>With these rules, an expression represents a calculation algorithm: an expression consists of unambiguous instructions (the arithmetic operations) structured according to the precedence and associativity rules, which make it possible to evaluate an expression as a step-by-step procedure.</p>
<p>If the expression includes an operation on invalid operands, then the algorithm stops and the expression is considered <strong>undefined</strong>: it can’t be evaluated. If the expression is written in Python, then the interpreter, which is carrying out the evaluation algorithm, stops with some error message (usually division by zero).</p>
<p>The algorithm can be ‘shown’ by making the precedence and associativity rules explicit with parentheses and then rewriting the expression step by step until a value is obtained or until a value can’t be obtained. Some examples:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(2^{3^{2}} = 2^{(3^{2})} = 2⁹ = 512\)</span></p></li>
<li><p>3 / 0⁵ = 3 / (0⁵) = 3 / 0: this expression is undefined</p></li>
<li><p>2 + − − −5 = 2 + (−(−(−5))) = 2 + (−5) = −3</p></li>
<li><p>3 + 4 × 5 = 3 + (4 × 5) = 23</p></li>
<li><p>3 − 4 − 5 = (3 − 4) − 5 = −6</p></li>
<li><p>7 − floor(3/4 + 0.5) mod 2 = 7 − (floor((3/4) + 0.5) mod 2) = 7 − (floor(0.75 + 0.5) mod 2 ) = 7 − (floor(1.25) mod 2) = 7 − (1 mod 2) = 7 − 1 = 6</p></li>
<li><p>−2⁰ = −(2⁰) = −1</p></li>
</ul>
<p>The final example explains the mystery at the end of the previous section: exponentiation has the highest precedence, so the negation is evaluated last. The minus sign is not part of the number, it’s an operator, and therefore subject to precedence and associativity rules. We have to put brackets to force our intended order of evaluation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
</pre></div></div>
</div>
<p>Negation has higher precedence than the other arithmetic operations, so −2 + 3 evaluates to 1 and not −(2 + 3) = −5.</p>
<p>Whenever you have an expression with exponentiation and negative numbers, I recommend adding parentheses to show explicitly how it should be evaluated, even if they are not necessary, as for example in <code class="docutils literal notranslate"><span class="pre">-(3</span> <span class="pre">**</span> <span class="pre">4)</span></code>.</p>
<section id="Mistakes">
<h2><span class="section-number">2.3.1. </span>Mistakes<a class="headerlink" href="#Mistakes" title="Link to this heading"></a></h2>
<p>Since most arithmetic operators are left-associative, it’s easy to forget that exponentiation is right-associative, which may lead to different results from what we’re expecting.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="o">**</span><span class="mi">2</span>  <span class="c1"># this is evaluated right to left</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
512
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>  <span class="c1"># use parentheses to force left-to-right evaluation</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
64
</pre></div></div>
</div>
<p>To show clearly your intentions and make code easy to understand, I think it’s best to write the first example as <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">**</span> <span class="pre">(3</span> <span class="pre">**</span> <span class="pre">2)</span></code>, even though the parentheses are redundant, because it reminds the reader how the expression is evaluated.</p>
<div class="admonition warning">
<p><strong>Note:</strong> When the expression involves exponentiation, use parentheses, even if they’re not necessary.</p>
</div>
<section id="Exercise-2.3.1">
<h3>Exercise 2.3.1<a class="headerlink" href="#Exercise-2.3.1" title="Link to this heading"></a></h3>
<p>In the previous section I wrote −2³ = −2 × −2 × −2 = −8. Is this correct, considering the precedence and associativity rules now introduced? If yes, explain why; if not, show how −2³ is evaluated.</p>
<p><a class="reference internal" href="../31_Hints/Hints_02_3_01.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_02_3_01.html"><span class="doc">Answer</span></a></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="02_2_operations.html" class="btn btn-neutral float-left" title="2.2. Arithmetic operations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="02_4_assignments.html" class="btn btn-neutral float-right" title="2.4. Assignments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2025 The Open University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>