

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>12.5. Creating sequences</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../_static/m269.css?v=4f7d186f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12.6. Avoiding slicing" href="12_6_avoid_slicing.html" />
    <link rel="prev" title="12.4. Inspecting sequences" href="12_4_inspect_sequences.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            M269
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/01-introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_Sequence/02-introduction.html">2. Numbers and sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Selection/03-introduction.html">3. Booleans and selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Iteration/04-introduction.html">4. Sequences and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_TMA01-1/05-introduction.html">5. TMA 01 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Implementing/06-introduction.html">6. Implementing sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07_Ordered/07-introduction.html">7. Stacks and queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Unordered/08-introduction.html">8. Unordered collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Practice-1/09-introduction.html">9. Practice 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_TMA01-2/10-introduction.html">10. TMA 01 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_Search/11-introduction.html">11. Exhaustive search</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="12-introduction.html">12. Recursion</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="12_1_factorial.html">12.1. The factorial function</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_2_integers.html">12.2. Recursion on integers</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_3_length.html">12.3. Length of a sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_4_inspect_sequences.html">12.4. Inspecting sequences</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">12.5. Creating sequences</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Prepend">12.5.1. Prepend</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Linear-search">12.5.2. Linear search</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-12.5.1">Exercise 12.5.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Append-and-insert">12.5.3. Append and insert</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-12.5.2">Exercise 12.5.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-12.5.3">Exercise 12.5.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="12_6_avoid_slicing.html">12.6. Avoiding slicing</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_7_multiple.html">12.7. Multiple recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_8_summary.html">12.8. Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../13_Divide/13-introduction.html">13. Divide and conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14_Sorting/14-introduction.html">14. Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15_TMA02-1/15-introduction.html">15. TMA 02 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16_Trees/16-introduction.html">16. Rooted trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17_Graphs_1/17-introduction.html">17. Graphs 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18_Greed/18-introduction.html">18. Greed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../19_Practice-2/19-introduction.html">19. Practice 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../20_TMA02-2/20-introduction.html">20. TMA 02 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21_Graphs_2/21-introduction.html">21. Graphs 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../22_Backtracking/22-introduction.html">22. Backtracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../23_Dynamic_Programming/23-introduction.html">23. Dynamic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../24_Practice-3/24-introduction.html">24. Practice 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../25_TMA03-1/25-introduction.html">25. TMA 03 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../26_Complexity_classes/26-introduction.html">26. Complexity classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../27_Computability/27-introduction.html">27. Computability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../28_TMA03-2/28-introduction.html">28. TMA 03 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31_Hints/31-introduction.html">29. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../32_Answers/32-introduction.html">30. Answers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../33_Figures/33-introduction.html">31. Figures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">M269</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="12-introduction.html"><span class="section-number">12. </span>Recursion</a></li>
      <li class="breadcrumb-item active"><span class="section-number">12.5. </span>Creating sequences</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Creating-sequences">
<h1><span class="section-number">12.5. </span>Creating sequences<a class="headerlink" href="#Creating-sequences" title="Link to this heading"></a></h1>
<p>This section shows further examples of recursion applied to sequences. The operations here return a new sequence, instead of a single value.</p>
<section id="Prepend">
<h2><span class="section-number">12.5.1. </span>Prepend<a class="headerlink" href="#Prepend" title="Link to this heading"></a></h2>
<p>Sequences are decomposed into a head and a tail; therefore they can be composed using prepend (insert at index 0). The recursive definition of a sequence can be restated as:</p>
<blockquote>
<div><p>A sequence S is either empty or prepend(head(S), tail(S)).</p>
</div></blockquote>
<p>I put the sequence as the second argument of the prepend operation to reinforce that the prepended item comes first in the output sequence. The operation can be implemented in two ways, depending on whether we want to modify the sequence …</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">prepend</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">items</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>… or create a new one. I’ll take that approach.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this code is also in m269_rec_list.py</span>


<span class="k">def</span><span class="w"> </span><span class="nf">prepend</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new list with item as head and items as tail.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">+</span> <span class="n">items</span>
</pre></div>
</div>
</div>
</section>
<section id="Linear-search">
<h2><span class="section-number">12.5.2. </span>Linear search<a class="headerlink" href="#Linear-search" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="12_4_inspect_sequences.html#Maximum"><span class="std std-ref">Section 12.4.1</span></a> showed a recursive way of finding the maximum number in a sequence. The same approach can be used to implement a linear search for all candidates that satisfy some conditions. Let’s take the questions in order:</p>
<ol class="arabic simple">
<li><p>What’s the smallest input and the corresponding output?</p></li>
</ol>
<p>The smallest input is the empty sequence and so is the output.</p>
<ol class="arabic simple" start="2">
<li><p>If we know the output for the tail of S, what’s the output for S?</p></li>
</ol>
<p>If we found all matching items in the tail, then we must prepend the head if it also satisfies the conditions. Otherwise, the solutions for S are just the solutions for the tail of S. By using prepend, the solutions are in the same order as the candidates.</p>
<p>The recursive definition is:</p>
<ul class="simple">
<li><p>if <em>candidates</em> is empty: search(<em>candidates</em>) = ()</p></li>
<li><p>otherwise if head(<em>candidates</em>) doesn’t satisfy the conditions: search(<em>candidates</em>) = search(tail(<em>candidates</em>))</p></li>
<li><p>otherwise: search(<em>candidates</em>) = prepend(head(<em>candidates</em>), search(tail(<em>candidates</em>))).</p></li>
</ul>
<p>The algorithmic pattern is a direct translation of the definition:</p>
<ol class="arabic simple">
<li><p>if <em>candidates</em> is empty:</p>
<ol class="arabic simple">
<li><p>let <em>solutions</em> be ()</p></li>
</ol>
</li>
<li><p>otherwise:</p>
<ol class="arabic simple">
<li><p>if head(<em>candidates</em>) doesn’t satisfy the conditions:</p>
<ol class="arabic simple">
<li><p>let <em>solutions</em> be search(tail(<em>candidates</em>))</p></li>
</ol>
</li>
<li><p>otherwise:</p>
<ol class="arabic simple">
<li><p>let <em>solutions</em> be prepend(head(<em>candidates</em>), search(tail(<em>candidates</em>))).</p></li>
</ol>
</li>
</ol>
</li>
</ol>
<p>Step 2.2.1 decreases the input, recurs and combines the head with the solution for the tail, while step 2.1.1 doesn’t do any combination. A slightly shorter version of step 2 is:</p>
<ol class="arabic simple" start="2">
<li><p>otherwise:</p>
<ol class="arabic simple">
<li><p>let <em>solutions</em> be search(tail(<em>candidates</em>))</p></li>
<li><p>if head(<em>candidates</em>) satisfies the conditions:</p>
<ol class="arabic simple">
<li><p>let <em>solutions</em> be prepend(head(<em>candidates</em>), <em>solutions</em>)</p></li>
</ol>
</li>
</ol>
</li>
</ol>
<section id="Exercise-12.5.1">
<h3>Exercise 12.5.1<a class="headerlink" href="#Exercise-12.5.1" title="Link to this heading"></a></h3>
<p>Use the above pattern (either version of step 2) to implement a Python function that returns all positive numbers in a sequence in the order they occur. Add tests.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">algoesup</span><span class="w"> </span><span class="kn">import</span> <span class="n">test</span>

<span class="o">%</span><span class="k">run</span> -i ../m269_rec_list


<span class="k">def</span><span class="w"> </span><span class="nf">positive</span><span class="p">(</span><span class="n">numbers</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new list of all positive numbers in the input.</span>

<span class="sd">    Preconditions: all elements of numbers are integers or floats</span>
<span class="sd">    Postconditions:</span>
<span class="sd">    the output&#39;s elements are in the same order as in the input</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="n">positive_tests</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># case,             numbers,        positive</span>
    <span class="p">(</span><span class="s1">&#39;shortest input&#39;</span><span class="p">,</span>  <span class="p">[],</span>             <span class="p">[]),</span>
    <span class="c1"># new tests:</span>
<span class="p">]</span>

<span class="n">test</span><span class="p">(</span><span class="n">positive</span><span class="p">,</span> <span class="n">positive_tests</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="../31_Hints/Hints_12_5_01.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_12_5_01.html"><span class="doc">Answer</span></a></p>
</section>
</section>
<section id="Append-and-insert">
<h2><span class="section-number">12.5.3. </span>Append and insert<a class="headerlink" href="#Append-and-insert" title="Link to this heading"></a></h2>
<p>Other basic operations that construct sequences can be defined in terms of prepend, e.g. the append(<em>items</em>, <em>item</em>) operation, which produces a new sequence with <em>item</em> at the end.</p>
<p>Obtaining a recursive definition is the same old story. I first think about the smallest input and its output. For this operation, the base case is the empty sequence. The output is a sequence with the given item only. Appending an item to an empty sequence is the same as prepending it.</p>
<p>As for the non-empty case, if I’ve appended the item to the tail, I only need to put the head back on at the start. The definition is:</p>
<ul class="simple">
<li><p>if <em>items</em> is empty: append(<em>items</em>, <em>item</em>) = prepend(<em>item</em>, <em>items</em>)</p></li>
<li><p>otherwise: append(<em>items</em>, <em>item</em>) = prepend(head(<em>items</em>), append(tail(<em>items</em>), <em>item</em>)).</p></li>
</ul>
<section id="Exercise-12.5.2">
<h3>Exercise 12.5.2<a class="headerlink" href="#Exercise-12.5.2" title="Link to this heading"></a></h3>
<p>Define operation reverse(<em>items</em>) recursively, using the append function. For example, reverse( (1, 2, 3) ) = (3, 2, 1) and reverse( () ) = ().</p>
<p><a class="reference internal" href="../31_Hints/Hints_12_5_02.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_12_5_02.html"><span class="doc">Answer</span></a></p>
</section>
<section id="Exercise-12.5.3">
<h3>Exercise 12.5.3<a class="headerlink" href="#Exercise-12.5.3" title="Link to this heading"></a></h3>
<p>Define insert(<em>items</em>, <em>item</em>, <em>index</em>) recursively, using prepend. For example, insert( (1, 2), 1.5, 1) = (1, 1.5, 2). Assume 0 ≤ <em>index</em> &lt; │<em>items</em>│.</p>
<p><a class="reference internal" href="../31_Hints/Hints_12_5_03.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_12_5_03.html"><span class="doc">Answer</span></a></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="12_4_inspect_sequences.html" class="btn btn-neutral float-left" title="12.4. Inspecting sequences" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="12_6_avoid_slicing.html" class="btn btn-neutral float-right" title="12.6. Avoiding slicing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2025 The Open University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>