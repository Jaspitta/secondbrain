

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7.2. Using stacks</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../_static/m269.css?v=4f7d186f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7.3. Queues" href="07_3_queue.html" />
    <link rel="prev" title="7.1. Stacks" href="07_1_stack.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            M269
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/01-introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_Sequence/02-introduction.html">2. Numbers and sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Selection/03-introduction.html">3. Booleans and selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Iteration/04-introduction.html">4. Sequences and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_TMA01-1/05-introduction.html">5. TMA 01 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Implementing/06-introduction.html">6. Implementing sequences</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="07-introduction.html">7. Stacks and queues</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="07_1_stack.html">7.1. Stacks</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7.2. Using stacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Balanced-brackets">7.2.1. Balanced brackets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-7.2.1">Exercise 7.2.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-7.2.2">Exercise 7.2.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-7.2.3">Exercise 7.2.3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Postfix-expressions">7.2.2. Postfix expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-7.2.4">Exercise 7.2.4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-7.2.5">Exercise 7.2.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Exercise-7.2.6">Exercise 7.2.6</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="07_3_queue.html">7.3. Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_4_priority_queue.html">7.4. Priority queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_5_summary.html">7.5. Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../08_Unordered/08-introduction.html">8. Unordered collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Practice-1/09-introduction.html">9. Practice 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_TMA01-2/10-introduction.html">10. TMA 01 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_Search/11-introduction.html">11. Exhaustive search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12_Recursion/12-introduction.html">12. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13_Divide/13-introduction.html">13. Divide and conquer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../14_Sorting/14-introduction.html">14. Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../15_TMA02-1/15-introduction.html">15. TMA 02 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16_Trees/16-introduction.html">16. Rooted trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17_Graphs_1/17-introduction.html">17. Graphs 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18_Greed/18-introduction.html">18. Greed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../19_Practice-2/19-introduction.html">19. Practice 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../20_TMA02-2/20-introduction.html">20. TMA 02 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21_Graphs_2/21-introduction.html">21. Graphs 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../22_Backtracking/22-introduction.html">22. Backtracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../23_Dynamic_Programming/23-introduction.html">23. Dynamic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../24_Practice-3/24-introduction.html">24. Practice 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../25_TMA03-1/25-introduction.html">25. TMA 03 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../26_Complexity_classes/26-introduction.html">26. Complexity classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../27_Computability/27-introduction.html">27. Computability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../28_TMA03-2/28-introduction.html">28. TMA 03 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31_Hints/31-introduction.html">29. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../32_Answers/32-introduction.html">30. Answers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../33_Figures/33-introduction.html">31. Figures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">M269</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="07-introduction.html"><span class="section-number">7. </span>Stacks and queues</a></li>
      <li class="breadcrumb-item active"><span class="section-number">7.2. </span>Using stacks</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Using-stacks">
<h1><span class="section-number">7.2. </span>Using stacks<a class="headerlink" href="#Using-stacks" title="Link to this heading"></a></h1>
<p>Let’s look at two classic applications of stacks.</p>
<section id="Balanced-brackets">
<h2><span class="section-number">7.2.1. </span>Balanced brackets<a class="headerlink" href="#Balanced-brackets" title="Link to this heading"></a></h2>
<p>Python expressions use round and square brackets. The brackets must be balanced: opening and closing brackets must match in pairs, and the brackets enclosed within a pair of matching brackets must also be balanced. If the brackets are not balanced, a syntax error occurs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span> <span class="o">+</span> <span class="s1">&#39;h&#39;</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">3</span>    <span class="c1"># brackets within () aren&#39;t balanced</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  Cell </span><span class="ansi-green-fg">In[1], line 1</span>
<span class="ansi-red-fg">    (&#39;hello&#39;[1:3 + &#39;h&#39;)] * 3    # brackets within () aren&#39;t balanced</span>
                      ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> closing parenthesis &#39;)&#39; does not match opening parenthesis &#39;[&#39;

</pre></div></div>
</div>
<p>Given a string, containing Python code or some other text, we want to know if the brackets within that string are balanced. That’s a decision problem.</p>
<div class="line-block">
<div class="line"><strong>Function</strong>: is balanced?</div>
<div class="line"><strong>Inputs</strong>: <em>text</em>, a string</div>
<div class="line"><strong>Preconditions</strong>: each bracket in <em>text</em> is one of (, ), [, ]</div>
<div class="line"><strong>Output</strong>: <em>balanced</em>, a Boolean</div>
<div class="line"><strong>Postconditions</strong>: <em>balanced</em> is true if and only if</div>
</div>
<ul class="simple">
<li><p>all opening and closing brackets in <em>text</em> match (have the same shape) in pairs</p></li>
<li><p>for each pair of matching brackets, the substring they delimit is balanced</p></li>
</ul>
<p>For the test table we need balanced and unbalanced brackets, nested and not. We must think of the various ways in which brackets are unbalanced. The empty string, the absence of brackets, and a string only with brackets are edge cases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">algoesup</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_tests</span>

<span class="n">is_balanced_tests</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># case,         text,                               balanced</span>
    <span class="p">[</span><span class="s1">&#39;no text&#39;</span><span class="p">,</span>     <span class="s1">&#39;&#39;</span><span class="p">,</span>                                 <span class="kc">True</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;no brackets&#39;</span><span class="p">,</span> <span class="s1">&#39;brackets are like Russian dolls&#39;</span><span class="p">,</span>  <span class="kc">True</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;matched&#39;</span><span class="p">,</span>     <span class="s1">&#39;(3 + 4)&#39;</span><span class="p">,</span>                          <span class="kc">True</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;mismatched&#39;</span><span class="p">,</span>  <span class="s1">&#39;(3 + 4]&#39;</span><span class="p">,</span>                          <span class="kc">False</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;not opened&#39;</span><span class="p">,</span>  <span class="s1">&#39;3 + 4]&#39;</span><span class="p">,</span>                           <span class="kc">False</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;not closed&#39;</span><span class="p">,</span>  <span class="s1">&#39;(3 + 4&#39;</span><span class="p">,</span>                           <span class="kc">False</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;wrong order&#39;</span><span class="p">,</span> <span class="s1">&#39;close ) before open (&#39;</span><span class="p">,</span>            <span class="kc">False</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">,</span>      <span class="s1">&#39;([([])])&#39;</span><span class="p">,</span>                         <span class="kc">True</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;nested pair&#39;</span><span class="p">,</span> <span class="s1">&#39;items[(i - 1):(i + 1)]&#39;</span><span class="p">,</span>           <span class="kc">True</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">check_tests</span><span class="p">(</span><span class="n">is_balanced_tests</span><span class="p">,</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OK: the test table passed the automatic checks.
</pre></div></div>
</div>
<p>I told you at the start of this section that this problem requires a stack. If I hadn’t let the cat out of the bag, one way to spot a stack is to look for a LIFO relationship. In a balanced string, the <em>first</em> closing bracket must match the <em>last</em> (most recent) opening bracket, or vice versa the <em>first</em> opening bracket must match the <em>last</em> closing bracket.</p>
<p>By the way, this problem is a particular case of the more general problem of matching delimiters that can be nested. Any language that has them, like the opening and closing tags in HTML and XML, requires a stack to be processed.</p>
<div class="admonition warning">
<p><strong>Note:</strong> When processing a nested structure, consider a stack.</p>
</div>
<p>The algorithm must check if each closing bracket matches the most recent opening bracket. For that, we must keep a stack of the brackets opened so far. As we go through the string, we push opening brackets on the stack, and we pop them as we go through the matching closing brackets. Let’s work through the last test in the table, as it has both kinds of brackets and they’re nested. Characters that aren’t brackets are skipped.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Stack</p></th>
<th class="head"><p>Remaining string</p></th>
<th class="head"><p>Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[</p></td>
<td><p>‘(i - 1):(i + 1)]’</p></td>
<td><p>opening bracket: push</p></td>
</tr>
<tr class="row-odd"><td><p>[(</p></td>
<td><p>‘):(i + 1)]’</p></td>
<td><p>closing bracket matches top item: pop</p></td>
</tr>
<tr class="row-even"><td><p>[</p></td>
<td><p>‘(i + 1)]’</p></td>
<td><p>opening bracket: push</p></td>
</tr>
<tr class="row-odd"><td><p>[(</p></td>
<td><p>‘)]’</p></td>
<td><p>closing bracket matches top item: pop</p></td>
</tr>
<tr class="row-even"><td><p>[</p></td>
<td><p>‘]’</p></td>
<td><p>closing bracket matches top item: pop</p></td>
</tr>
</tbody>
</table>
<p>We reached the end of the string. Since the stack is empty, i.e. there are no open but yet unclosed brackets, the brackets must be balanced.</p>
<p>The other tests with balanced brackets are checked in a similar way, so let’s consider the tests with unbalanced brackets. As the algorithm goes through the string, how can it spot that the fourth text, ‘(3 + 4]’, isn’t balanced?</p>
<hr class="docutils" />
<p>When it reaches the closing square bracket, the stack has the opening round bracket. The brackets don’t match, so the algorithm can immediately stop with <em>balanced</em> = false.</p>
<p>Let’s consider now the ‘not opened’ case: <code class="docutils literal notranslate"><span class="pre">'3</span> <span class="pre">+</span> <span class="pre">4]'</span></code>. How can the algorithm spot the brackets are unbalanced?</p>
<hr class="docutils" />
<p>When it reaches the closing square bracket, the stack is empty. There’s no opening bracket the closing bracket can match, so the algorithm can immediately stop with a false output.</p>
<p>The ‘wrong order’ case, <code class="docutils literal notranslate"><span class="pre">'close</span> <span class="pre">)</span> <span class="pre">before</span> <span class="pre">open</span> <span class="pre">('</span></code>, is processed in the same way, so let’s look at the final ‘not closed’ case: <code class="docutils literal notranslate"><span class="pre">'(3</span> <span class="pre">+</span> <span class="pre">4'</span></code>. How can the algorithm detect it’s unbalanced?</p>
<hr class="docutils" />
<p>Upon reaching the end of the string, the stack isn’t empty. Some brackets were opened but not closed, which means they’re unbalanced.</p>
<p>Now that we have thought through the test cases, we can outline the algorithm. Here’s one possible way, using the imperative tense and describing some of the rationale.</p>
<blockquote>
<div><p>Create an empty stack for the brackets opened so far and not yet matched. Iterate over the string and process each character. If it’s an opening bracket, push it on the stack. If it’s a closing bracket and the stack is empty or the top item isn’t a matching opening bracket, stop: the brackets aren’t balanced. Otherwise, the brackets match, so pop the opening bracket from the stack. If the end of the string is reached, the brackets are balanced if and only if the stack is empty, i.e. no open
brackets remain to be closed.</p>
</div></blockquote>
<p>Here’s the step-by-step algorithm.</p>
<ol class="arabic simple">
<li><p>let <em>opened</em> be an empty stack</p></li>
<li><p>for each <em>character</em> in <em>text</em>:</p>
<ol class="arabic simple">
<li><p>if <em>character</em> = ‘(’ or <em>character</em> = ‘[‘:</p>
<ol class="arabic simple">
<li><p>push <em>character</em> on <em>opened</em></p></li>
</ol>
</li>
<li><p>otherwise if <em>character</em> = ‘)’:</p>
<ol class="arabic simple">
<li><p>if │<em>opened</em>│ &gt; 0 and top of <em>opened</em> = ‘(‘:</p>
<ol class="arabic simple">
<li><p>pop <em>opened</em></p></li>
</ol>
</li>
<li><p>otherwise:</p>
<ol class="arabic simple">
<li><p>let <em>balanced</em> be false</p></li>
<li><p>stop</p></li>
</ol>
</li>
</ol>
</li>
<li><p>otherwise if <em>character</em> = ‘]’:</p>
<ol class="arabic simple">
<li><p>if │<em>opened</em>│ &gt; 0 and top of <em>opened</em> = ‘[‘:</p>
<ol class="arabic simple">
<li><p>pop <em>opened</em></p></li>
</ol>
</li>
<li><p>otherwise:</p>
<ol class="arabic simple">
<li><p>let <em>balanced</em> be false</p></li>
<li><p>stop</p></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li><p>let <em>balanced</em> be │<em>opened</em>│ = 0</p></li>
</ol>
<section id="Exercise-7.2.1">
<h3>Exercise 7.2.1<a class="headerlink" href="#Exercise-7.2.1" title="Link to this heading"></a></h3>
<p>Give a best- and a worst-case scenario of the algorithm and their corresponding complexities.</p>
<p><a class="reference internal" href="../31_Hints/Hints_07_2_01.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_07_2_01.html"><span class="doc">Answer</span></a></p>
</section>
<section id="Exercise-7.2.2">
<h3>Exercise 7.2.2<a class="headerlink" href="#Exercise-7.2.2" title="Link to this heading"></a></h3>
<p>Translate the algorithm to Python code.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> -i ../m269_stack

<span class="kn">from</span><span class="w"> </span><span class="nn">algoesup</span><span class="w"> </span><span class="kn">import</span> <span class="n">test</span>

<span class="k">def</span><span class="w"> </span><span class="nf">is_balanced</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if all brackets in text are balanced.</span>

<span class="sd">    Preconditions: each bracket in &#39;text&#39; is one of (, ), [, ]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="n">test</span><span class="p">(</span><span class="n">is_balanced</span><span class="p">,</span> <span class="n">is_balanced_tests</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="../32_Answers/Answers_07_2_02.html"><span class="doc">Answer</span></a></p>
</section>
<section id="Exercise-7.2.3">
<h3>Exercise 7.2.3<a class="headerlink" href="#Exercise-7.2.3" title="Link to this heading"></a></h3>
<p>Assuming only round brackets (parentheses) can occur in the input string, outline a simpler linear-time algorithm that checks if they’re balanced.</p>
<p><a class="reference internal" href="../31_Hints/Hints_07_2_03.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_07_2_03.html"><span class="doc">Answer</span></a></p>
</section>
</section>
<section id="Postfix-expressions">
<h2><span class="section-number">7.2.2. </span>Postfix expressions<a class="headerlink" href="#Postfix-expressions" title="Link to this heading"></a></h2>
<p>An expression like 3 − 4 is in <strong>infix</strong> notation: the operator is between the operands. An expression like 3 4 − is in <strong>postfix</strong> notation: the operator comes after the operands.</p>
<p>Postfix expressions don’t require parentheses because they show explicitly in which order the operators are applied. Some examples:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Infix</p></th>
<th class="head"><p>Postfix</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3 − 4 × 5</p></td>
<td><p>3 4 5 × −</p></td>
</tr>
<tr class="row-odd"><td><p>(3 − 4) × 5</p></td>
<td><p>3 4 − 5 ×</p></td>
</tr>
<tr class="row-even"><td><p>(3 − 4) × (5 − 6)</p></td>
<td><p>3 4 − 5 6 − ×</p></td>
</tr>
<tr class="row-odd"><td><p>3 − 4 × (5 − 6)</p></td>
<td><p>3 4 5 6 − × −</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p><strong>Info:</strong> Postfix notation is also known as reverse Polish notation.</p>
</div>
<p>In the following, postfix expressions only contain natural numbers and the subtraction and multiplication operators.</p>
<section id="Exercise-7.2.4">
<h3>Exercise 7.2.4<a class="headerlink" href="#Exercise-7.2.4" title="Link to this heading"></a></h3>
<p>Postfix expressions can be evaluated in a single pass from left to right, using a stack. Explain why.</p>
<p><a class="reference internal" href="../31_Hints/Hints_07_2_04.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_07_2_04.html"><span class="doc">Answer</span></a></p>
</section>
<section id="Exercise-7.2.5">
<h3>Exercise 7.2.5<a class="headerlink" href="#Exercise-7.2.5" title="Link to this heading"></a></h3>
<p>Outline an algorithm that evaluates a postfix expression, given as a non-empty sequence of characters ‘−’ and ‘*’ and natural numbers. You can assume the sequence represents a valid postfix expression, e.g. it doesn’t start with an operator.</p>
<p><a class="reference internal" href="../31_Hints/Hints_07_2_05.html"><span class="doc">Hint</span></a> <a class="reference internal" href="../32_Answers/Answers_07_2_05.html"><span class="doc">Answer</span></a></p>
</section>
<section id="Exercise-7.2.6">
<h3>Exercise 7.2.6<a class="headerlink" href="#Exercise-7.2.6" title="Link to this heading"></a></h3>
<p>Implement the algorithm. You don’t need to add tests.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">run</span> -i ../m269_stack

<span class="kn">from</span><span class="w"> </span><span class="nn">algoesup</span><span class="w"> </span><span class="kn">import</span> <span class="n">test</span>

<span class="k">def</span><span class="w"> </span><span class="nf">evaluate</span><span class="p">(</span><span class="n">expression</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the value of the given postfix expression.</span>

<span class="sd">    Preconditions:</span>
<span class="sd">    - each item in the input list is a natural number, &#39;-&#39; or &#39;*&#39;</span>
<span class="sd">    - the input represents a valid non-empty postfix expression</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="n">evaluate_tests</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># case,               expression,                   value</span>
    <span class="p">[</span><span class="s2">&quot;3 * 4&quot;</span><span class="p">,</span>             <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">],</span>                  <span class="mi">12</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;3 - 4&quot;</span><span class="p">,</span>             <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">],</span>                  <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;3 - 4 * 5&quot;</span><span class="p">,</span>         <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">],</span>          <span class="o">-</span><span class="mi">17</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;(3 - 4) * 5&quot;</span><span class="p">,</span>       <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">],</span>          <span class="o">-</span><span class="mi">5</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;(3 - 4) * (5 - 6)&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">],</span>  <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;no operation&quot;</span><span class="p">,</span>      <span class="p">[</span><span class="mi">4</span><span class="p">],</span>                          <span class="mi">4</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">test</span><span class="p">(</span><span class="n">evaluate</span><span class="p">,</span> <span class="n">evaluate_tests</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><a class="reference internal" href="../32_Answers/Answers_07_2_06.html"><span class="doc">Answer</span></a></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="07_1_stack.html" class="btn btn-neutral float-left" title="7.1. Stacks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="07_3_queue.html" class="btn btn-neutral float-right" title="7.3. Queues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2025 The Open University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>