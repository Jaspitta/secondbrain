

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14.1. Preliminaries</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
      <link rel="stylesheet" type="text/css" href="../_static/m269.css?v=4f7d186f" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="14.2. Bogosort" href="14_2_bogosort.html" />
    <link rel="prev" title="14. Sorting" href="14-introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            M269
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/01-introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_Sequence/02-introduction.html">2. Numbers and sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_Selection/03-introduction.html">3. Booleans and selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_Iteration/04-introduction.html">4. Sequences and iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_TMA01-1/05-introduction.html">5. TMA 01 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_Implementing/06-introduction.html">6. Implementing sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07_Ordered/07-introduction.html">7. Stacks and queues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_Unordered/08-introduction.html">8. Unordered collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_Practice-1/09-introduction.html">9. Practice 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_TMA01-2/10-introduction.html">10. TMA 01 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_Search/11-introduction.html">11. Exhaustive search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12_Recursion/12-introduction.html">12. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../13_Divide/13-introduction.html">13. Divide and conquer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="14-introduction.html">14. Sorting</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">14.1. Preliminaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Problem">14.1.1. Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Problem-instances">14.1.2. Problem instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Algorithms">14.1.3. Algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sorting-in-Python">14.1.4. Sorting in Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="14_2_bogosort.html">14.2. Bogosort</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_3_insertion_sort.html">14.3. Insertion sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_4_selection_sort.html">14.4. Selection sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_5_merge_sort.html">14.5. Merge sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_6_quicksort.html">14.6. Quicksort</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_7_quicksort_variants.html">14.7. Quicksort variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_8_pigeonhole.html">14.8. Pigeonhole sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_9_summary.html">14.9. Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../15_TMA02-1/15-introduction.html">15. TMA 02 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../16_Trees/16-introduction.html">16. Rooted trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../17_Graphs_1/17-introduction.html">17. Graphs 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../18_Greed/18-introduction.html">18. Greed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../19_Practice-2/19-introduction.html">19. Practice 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../20_TMA02-2/20-introduction.html">20. TMA 02 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../21_Graphs_2/21-introduction.html">21. Graphs 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../22_Backtracking/22-introduction.html">22. Backtracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../23_Dynamic_Programming/23-introduction.html">23. Dynamic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../24_Practice-3/24-introduction.html">24. Practice 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../25_TMA03-1/25-introduction.html">25. TMA 03 part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../26_Complexity_classes/26-introduction.html">26. Complexity classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../27_Computability/27-introduction.html">27. Computability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../28_TMA03-2/28-introduction.html">28. TMA 03 part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../31_Hints/31-introduction.html">29. Hints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../32_Answers/32-introduction.html">30. Answers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../33_Figures/33-introduction.html">31. Figures</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">M269</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="14-introduction.html"><span class="section-number">14. </span>Sorting</a></li>
      <li class="breadcrumb-item active"><span class="section-number">14.1. </span>Preliminaries</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Preliminaries">
<h1><span class="section-number">14.1. </span>Preliminaries<a class="headerlink" href="#Preliminaries" title="Link to this heading"></a></h1>
<p>This section introduces the problem and the terminology used in the rest of the chapter.</p>
<section id="Problem">
<h2><span class="section-number">14.1.1. </span>Problem<a class="headerlink" href="#Problem" title="Link to this heading"></a></h2>
<p>The problem to be solved is to put the items of an input sequence in ascending order; more precisely, in non-decreasing order, because items may be duplicated. For example, if the input is (1, 3, 2, 4, 2), the output is (1, 2, 2, 3, 4). Sorting in descending order can be done with the same algorithm, but using the opposite comparison, so we won’t consider it further. I’ll use ‘ascending’ to mean ‘non-decreasing’ because the latter is a bit of a mouthful.</p>
<p>Imagine the items represent playing cards, with a value (ace, two, …, ten, jack, queen, king) and a suit (clubs, diamonds, hearts, spades). Depending on the game played, we may wish to sort just by suit, just by value, by both, by colour (spades and clubs are black, hearts and diamonds are red) or even by a bespoke order. For example, depending on the game, the highest card in a suit may be the ace, the king, the seven or something else.</p>
<p>To allow the same items to be sorted in many different ways, we’ll assume the user provides a function that computes a key for any given item. The problem then consists of putting items in ascending order of their keys. The keys must be of a comparable type, like integers or strings: otherwise it’s impossible to sort them.</p>
<p>For example, to sort cards by value, from ace up to king, one possible function is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\text{key}(value, suit) = \begin{cases}
1       &amp; \text{if } value = \text{ace} \\
11      &amp; \text{if } value = \text{jack} \\
12      &amp; \text{if } value = \text{queen} \\
13      &amp; \text{if } value = \text{king} \\
value   &amp; \text{otherwise}
\end{cases}\end{split}\]</div>
<p>This key function ignores the suit. If the ace is the highest instead of the lowest card, then the function must return a value higher than 13 for an ace. There are infinitely many possible functions, as long as key(2, <em>suit</em>) &lt; key(3, <em>suit</em>) &lt; … &lt; key(king, <em>suit</em>) &lt; key(ace, <em>suit</em>).</p>
<p>There are two versions of the sorting problem. One creates a new sorted sequence. In the following definition and the rest of this chapter, <em>n</em> is the length of the input sequence.</p>
<div class="line-block">
<div class="line"><strong>Function</strong>: create ascending sequence</div>
<div class="line"><strong>Inputs</strong>: <em>unsorted</em>, a sequence; <em>key</em>, a function of object to object</div>
<div class="line"><strong>Preconditions</strong>: <em>key</em>(<em>a</em>) and <em>key</em>(<em>b</em>) are comparable for any <em>a</em> and <em>b</em> in <em>unsorted</em></div>
<div class="line"><strong>Output</strong>: <em>sorted</em>, a sequence</div>
<div class="line"><strong>Postconditions</strong>:</div>
</div>
<ul class="simple">
<li><p><em>sorted</em> is a permutation of <em>unsorted</em></p></li>
<li><p><em>key</em>(<em>sorted</em>[<em>i</em>]) ≤ <em>key</em>(<em>sorted</em>[<em>j</em>]) for every 0 ≤ <em>i</em> &lt; <em>j</em> &lt; <em>n</em></p></li>
</ul>
<p>The first postcondition states that the output has the same items as the input. The second postcondition could be stated as <em>key</em>(<em>sorted</em>[0]) ≤ <em>key</em>(<em>sorted</em>[1]) ≤ … ≤ <em>key</em>(<em>sorted</em>[<em>n</em>−1]).</p>
<p>The second version modifies the input sequence.</p>
<div class="line-block">
<div class="line"><strong>Operation</strong>: put in ascending order</div>
<div class="line"><strong>Input/Output</strong>: <em>items</em>, a sequence</div>
<div class="line"><strong>Inputs</strong>: <em>key</em>, a function of object to object</div>
<div class="line"><strong>Preconditions</strong>: <em>key</em>(<em>a</em>) and <em>key</em>(<em>b</em>) are comparable for any <em>a</em> and <em>b</em> in <em>items</em></div>
<div class="line"><strong>Postconditions</strong>:</div>
</div>
<ul class="simple">
<li><p>post-<em>items</em> is a permutation of pre-<em>items</em></p></li>
<li><p><em>key</em>(post-<em>items</em>[<em>i</em>]) ≤ <em>key</em>(post-<em>items</em>[<em>j</em>]) for every 0 ≤ <em>i</em> &lt; <em>j</em> &lt; <em>n</em></p></li>
</ul>
<p>The rest of this chapter assumes that sequences are represented as arrays, so that algorithms can efficiently access any item in the sequence.</p>
</section>
<section id="Problem-instances">
<h2><span class="section-number">14.1.2. </span>Problem instances<a class="headerlink" href="#Problem-instances" title="Link to this heading"></a></h2>
<p>To test the sorting algorithms to be presented, I’ll use playing cards, each represented by a string of length 2, e.g. ‘AS’ (ace of spades), ‘7H’ (seven of hearts) and ‘TD’ (ten of diamonds).</p>
<p>Many other representations of cards are possible. Some are easier for a user to understand; others make key functions easier to implement. I chose this one because it makes tests quick to type and easy to understand. It’s up to the key function to transform a user-friendly representation into a sortable key. I define three key functions:</p>
<ul class="simple">
<li><p>A key function that returns the value of a card as an integer from 1 to 13 allows us to sort the cards by ascending value.</p></li>
<li><p>A key function that returns the suit of a card allows us to sort cards alphabetically by suit: clubs, diamonds, hearts, spades.</p></li>
<li><p>A key function that returns the suit–value pair allows us to sort the cards first alphabetically by suit and within the same suit by ascending value, due to the <a class="reference internal" href="../04_Iteration/04_1_sequences.html#Comparison"><span class="std std-ref">lexicographic comparison</span></a> of pairs.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this code is also in m269_sorting.py</span>


<span class="k">def</span><span class="w"> </span><span class="nf">suit</span><span class="p">(</span><span class="n">card</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the second character of the card.</span>

<span class="sd">    Preconditions: card has two characters;</span>
<span class="sd">    the first is &#39;A&#39;, &#39;2&#39; to &#39;9&#39;, &#39;T&#39;, &#39;J&#39;, &#39;Q&#39; or &#39;K&#39;</span>
<span class="sd">    the second is &#39;C&#39;, &#39;D&#39;, &#39;H&#39; or &#39;S&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">card</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>


<span class="n">VALUES</span> <span class="o">=</span> <span class="s2">&quot;A23456789TJQK&quot;</span>


<span class="k">def</span><span class="w"> </span><span class="nf">value</span><span class="p">(</span><span class="n">card</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the value of the card.</span>

<span class="sd">    Preconditions: as for function &#39;suit&#39;</span>
<span class="sd">    Postconditions: the output is 1 to 13 respectively for</span>
<span class="sd">    &#39;A&#39;, &#39;2&#39; to &#39;9&#39;, &#39;T&#39;, &#39;J&#39;, &#39;Q&#39;, &#39;K&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">VALUES</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">VALUES</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">==</span> <span class="n">card</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># return 1—13, not 0—12</span>


<span class="k">def</span><span class="w"> </span><span class="nf">suit_value</span><span class="p">(</span><span class="n">card</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a tuple with the suit and value of the card.</span>

<span class="sd">    Preconditions: as for function &#39;suit&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">suit</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">value</span><span class="p">(</span><span class="n">card</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">suit_value</span><span class="p">(</span><span class="s2">&quot;TD&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(&#39;D&#39;, 10)
</pre></div></div>
</div>
<p>I can now write a few tests, using Python lists for the sequences. These tests will only work for the first version of the problem, where the sorting function returns a sorted sequence.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this code is also in m269_sorting.py</span>

<span class="n">UP_DOWN</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;AS&quot;</span><span class="p">,</span> <span class="s2">&quot;3H&quot;</span><span class="p">,</span> <span class="s2">&quot;QD&quot;</span><span class="p">,</span> <span class="s2">&quot;KC&quot;</span><span class="p">]</span>  <span class="c1"># ascending values, descending suits</span>
<span class="n">SAME_VALUE</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;TD&quot;</span><span class="p">,</span> <span class="s2">&quot;TS&quot;</span><span class="p">,</span> <span class="s2">&quot;TH&quot;</span><span class="p">,</span> <span class="s2">&quot;TC&quot;</span><span class="p">]</span>

<span class="n">sorting_tests</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># case,        unsorted,           key, sorted</span>
    <span class="p">(</span><span class="s1">&#39;empty list&#39;</span><span class="p">,</span> <span class="p">[],</span>          <span class="n">suit_value</span><span class="p">,</span> <span class="p">[]),</span>
    <span class="p">(</span><span class="s1">&#39;1 card&#39;</span><span class="p">,</span>     <span class="p">[</span><span class="s1">&#39;AS&#39;</span><span class="p">],</span>      <span class="n">suit_value</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;AS&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;same cards&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;6D&#39;</span><span class="p">,</span><span class="s1">&#39;6D&#39;</span><span class="p">],</span> <span class="n">suit_value</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;6D&#39;</span><span class="p">,</span><span class="s1">&#39;6D&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;3 cards&#39;</span><span class="p">,</span>    <span class="p">[</span><span class="s1">&#39;JC&#39;</span><span class="p">,</span><span class="s1">&#39;8D&#39;</span><span class="p">,</span><span class="s1">&#39;TS&#39;</span><span class="p">],</span> <span class="n">value</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;8D&#39;</span><span class="p">,</span><span class="s1">&#39;TS&#39;</span><span class="p">,</span><span class="s1">&#39;JC&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;values up&#39;</span><span class="p">,</span>  <span class="n">UP_DOWN</span><span class="p">,</span>          <span class="n">value</span><span class="p">,</span> <span class="n">UP_DOWN</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;suits down&#39;</span><span class="p">,</span> <span class="n">UP_DOWN</span><span class="p">,</span>           <span class="n">suit</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;KC&#39;</span><span class="p">,</span><span class="s1">&#39;QD&#39;</span><span class="p">,</span><span class="s1">&#39;3H&#39;</span><span class="p">,</span><span class="s1">&#39;AS&#39;</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">&#39;same value&#39;</span><span class="p">,</span> <span class="n">SAME_VALUE</span><span class="p">,</span>  <span class="n">suit_value</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;TC&#39;</span><span class="p">,</span><span class="s1">&#39;TD&#39;</span><span class="p">,</span><span class="s1">&#39;TH&#39;</span><span class="p">,</span><span class="s1">&#39;TS&#39;</span><span class="p">]),</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>To check the test table, I must tell <code class="docutils literal notranslate"><span class="pre">check_tests</span></code> that the ‘key’ argument is a function. In Python, functions are objects of type <code class="docutils literal notranslate"><span class="pre">Callable</span></code>, defined in the <code class="docutils literal notranslate"><span class="pre">typing</span></code> module.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">algoesup</span><span class="w"> </span><span class="kn">import</span> <span class="n">check_tests</span>

<span class="n">check_tests</span><span class="p">(</span><span class="n">sorting_tests</span><span class="p">,</span> <span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="nb">list</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OK: the test table passed the automatic checks.
</pre></div></div>
</div>
<p>To measure the performance of sorting algorithms we need long sequences, but there are only 52 cards. I’ll use long sequences of integers. Integers can be compared, so a key function that returns the item itself suffices. A function that returns its input is called the identity function.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this code is also in m269_sorting.py</span>


<span class="k">def</span><span class="w"> </span><span class="nf">identity</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the item, i.e. the key is the whole item.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">item</span>
</pre></div>
</div>
</div>
</section>
<section id="Algorithms">
<h2><span class="section-number">14.1.3. </span>Algorithms<a class="headerlink" href="#Algorithms" title="Link to this heading"></a></h2>
<p>An algorithm is <strong>in-place</strong> if it doesn’t use any additional memory, other than the call stack and a fixed number of local variables for individual items in the sequence, for indices, Booleans, etc. For example, finding a pair of items that add up to a given amount can be done in-place with an exhaustive search (nested loop) for all pairs, or not in-place, with an additional map as in an <a class="reference internal" href="../09_Practice-1/09_3_voucher.html#Voucher"><span class="std std-ref">earlier exercise</span></a>.</p>
<p>Sorting algorithms that return a new sorted sequence aren’t in-place. Those that modify the input sequence are usually in-place, but if an algorithm would create a temporary new sorted sequence and then copy the items to the input sequence, it wouldn’t be in-place.</p>
</section>
<section id="Sorting-in-Python">
<h2><span class="section-number">14.1.4. </span>Sorting in Python<a class="headerlink" href="#Sorting-in-Python" title="Link to this heading"></a></h2>
<p>You’ve seen in <a class="reference internal" href="../04_Iteration/04_6_lists.html#Lists"><span class="std std-ref">Chapter 4</span></a> that Python has a <code class="docutils literal notranslate"><span class="pre">sorted</span></code> function which returns a sorted list from a given sequence and a list method <code class="docutils literal notranslate"><span class="pre">sort</span></code> which modifies the list. The method sorts the input sequence in-place; the function doesn’t. Both can take an argument indicating which key function to use.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;2S&quot;</span><span class="p">,</span> <span class="s2">&quot;AS&quot;</span><span class="p">,</span> <span class="s2">&quot;2D&quot;</span><span class="p">,</span> <span class="s2">&quot;AD&quot;</span><span class="p">]</span>
<span class="n">items</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">suit_value</span><span class="p">)</span>
<span class="n">items</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;AD&#39;, &#39;2D&#39;, &#39;AS&#39;, &#39;2S&#39;]
</pre></div></div>
</div>
<p>Like for the <code class="docutils literal notranslate"><span class="pre">reverse</span></code> parameter, omitting the parameter name leads to an error.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">items</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">suit_value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[7], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">items</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">sort</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">suit_value</span><span class="ansi-yellow-bg">)</span>

<span class="ansi-red-fg">TypeError</span>: sort() takes no positional arguments
</pre></div></div>
</div>
<p>Python uses the Powersort algorithm, an improvement over Timsort, which in turn is derived from the insertion sort and merge sort algorithms explained in later sections. Powersort and Timsort are in-place algorithms with linear complexity in the best case and log-linear complexity in the worst case. You’re unlikely to need another algorithm for sorting arrays in memory. I won’t explain Powersort, Timsort or how to sort data that doesn’t fit in memory. This chapter isn’t about the best way of
sorting; instead it presents algorithms that illustrate previous concepts and techniques.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="14-introduction.html" class="btn btn-neutral float-left" title="14. Sorting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="14_2_bogosort.html" class="btn btn-neutral float-right" title="14.2. Bogosort" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020–2025 The Open University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>